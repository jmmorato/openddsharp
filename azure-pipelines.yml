jobs:
- job: VisualStudio2019
  timeoutInMinutes: 120
  pool:
    vmImage: windows-2019
  strategy:
    matrix:
      Debug64:
        BuildPlatform: x64
        BuildConfiguration: Debug
      Release64:
        BuildPlatform: x64
        BuildConfiguration: Release
      Debug32:
        BuildPlatform: x86
        BuildConfiguration: Debug
      Release32:
        BuildPlatform: x86
        BuildConfiguration: Release
  variables:
    DOTNET_SDK_VERSION: '3.1.12'
  steps:
    - task: DotNetCoreInstaller@0
      displayName: 'Use .NET Core SDK $(DOTNET_SDK_VERSION)'
      inputs:
        version: '$(DOTNET_SDK_VERSION)'
    - powershell: $(Build.SourcesDirectory)\Build\OpenDDSharp.Build.CppCli.ps1 --BuildConfiguration=$(BuildConfiguration) --BuildPlatform=$(BuildPlatform)
      displayName: 'Execute Cake PowerShell Bootstrapper'
      workingDirectory: $(Build.SourcesDirectory)\Build
