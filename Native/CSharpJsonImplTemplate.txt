	public class <%TYPE%>TypeSupport : ITypeSupport<<%TYPE%>>
    {
        #region Field
        private static readonly JsonSerializerOptions _serializerOptions = new JsonSerializerOptions
        {
            DefaultIgnoreCondition = JsonIgnoreCondition.WhenWritingNull,
            WriteIndented = false,
            AllowTrailingCommas = true,
            Converters =
            {
                new JsonStringEnumConverter(),
                new OctetArrayConverter(),
                new FloatJsonConverter(),
                new DoubleJsonConverter(),
                new DecimalJsonConverter(),
            },
        };

        private static readonly <%TYPE%>SerializerContext _serializerContext = new <%TYPE%>SerializerContext(_serializerOptions);

        private IntPtr _native;
        #endregion

        #region Constructors
        public <%TYPE%>TypeSupport()
        {
            _native = <%TYPE%>TypeSupportNative.<%TYPE%>TypeSupportNew();
        }
        #endregion

        #region Methods
        public string GetTypeName()
        {
            return Marshal.PtrToStringAnsi(<%TYPE%>TypeSupportNative.GetTypeName(_native));
        }

        public ReturnCode RegisterType(DomainParticipant dp, string typeName)
        {
            return (ReturnCode)<%TYPE%>TypeSupportNative.RegisterType(_native, dp.ToNative(), typeName);
        }

        public ReturnCode UnregisterType(DomainParticipant dp, string typeName)
        {
            return (ReturnCode)<%TYPE%>TypeSupportNative.UnregisterType(_native, dp.ToNative(), typeName);
        }

        public string EncodeToString(<%TYPE%> sample)
        {
            return JsonSerializer.Serialize(sample, typeof(<%TYPE%>), _serializerContext);
        }

        public <%TYPE%> DecodeFromString(string str)
        {
            return JsonSerializer.Deserialize(str, typeof(<%TYPE%>), _serializerContext) as <%TYPE%>;
        }

        public byte[] EncodeToBytes(<%TYPE%> sample)
        {
            throw new NotImplementedException();
        }

        public <%TYPE%> DecodeFromBytes(byte[] data)
        {
            throw new NotImplementedException();
        }
        #endregion
    }

    [SuppressUnmanagedCodeSecurity]
    internal static partial class <%TYPE%>TypeSupportNative
    {
#if NET7_0_OR_GREATER
        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>TypeSupport_new", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial IntPtr <%TYPE%>TypeSupportNew();

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>TypeSupport_GetTypeName", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial IntPtr GetTypeName(IntPtr native);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>TypeSupport_RegisterType", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int RegisterType(IntPtr native, IntPtr dp, string typeName);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>TypeSupport_UnregisterType", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int UnregisterType(IntPtr native, IntPtr dp, string typeName);
#else
        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>TypeSupport_new", CallingConvention = CallingConvention.Cdecl)]
        internal static extern IntPtr <%TYPE%>TypeSupportNew();

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>TypeSupport_GetTypeName", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto, BestFitMapping = false, ThrowOnUnmappableChar = true)]
        internal static extern IntPtr GetTypeName(IntPtr native);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>TypeSupport_RegisterType", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi, BestFitMapping = false, ThrowOnUnmappableChar = true)]
        internal static extern int RegisterType(IntPtr native, IntPtr dp, string typeName);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>TypeSupport_UnregisterType", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi, BestFitMapping = false, ThrowOnUnmappableChar = true)]
        internal static extern int UnregisterType(IntPtr native, IntPtr dp, string typeName);
#endif
    }

    [JsonSourceGenerationOptions(GenerationMode = JsonSourceGenerationMode.Default)]
    [JsonSerializable(typeof(<%TYPE%>))]
    public partial class <%TYPE%>SerializerContext : JsonSerializerContext
    {
    }

    public class <%TYPE%>DataWriter : DataWriter
    {
        #region Fields
        private readonly IntPtr _native;
        private <%TYPE%>TypeSupport _typeSupport;
        #endregion

        #region Constructors
        public <%TYPE%>DataWriter(DataWriter dw) : base(dw.ToNative())
        {
			IntPtr ptr = base.ToNative();
            _native = <%TYPE%>DataWriterNative.Narrow(ptr);

            _typeSupport = new <%TYPE%>TypeSupport();
        }
        #endregion

        #region Methods
        public InstanceHandle RegisterInstance(<%TYPE%> instance)
        {
            InstanceHandle ret = InstanceHandle.HandleNil;

            var str = _typeSupport.EncodeToString(instance);
            var json_data = MarshalHelper.NativeUtf8FromString(str);

            ret = <%TYPE%>DataWriterNative.RegisterInstance(_native, json_data);

            return ret;
        }

        public InstanceHandle RegisterInstance(<%TYPE%> instance, Timestamp timestamp)
        {
            InstanceHandle ret = InstanceHandle.HandleNil;

            var str = _typeSupport.EncodeToString(instance);
            var json_data = MarshalHelper.NativeUtf8FromString(str);

            ret = <%TYPE%>DataWriterNative.RegisterInstanceTimestamp(_native, json_data, timestamp);

            return ret;
        }

        public ReturnCode UnregisterInstance(<%TYPE%> data)
        {
            InstanceHandle handle = LookupInstance(data);
            if (handle == InstanceHandle.HandleNil)
            {
                return ReturnCode.PreconditionNotMet;
            }

            var str = _typeSupport.EncodeToString(data);
            var json_data = MarshalHelper.NativeUtf8FromString(str);

	        return (ReturnCode)<%TYPE%>DataWriterNative.UnregisterInstance(_native, json_data, handle);
        }

		public ReturnCode UnregisterInstance(<%TYPE%> data, InstanceHandle handle)
        {
            var str = _typeSupport.EncodeToString(data);
            var json_data = MarshalHelper.NativeUtf8FromString(str);

            return (ReturnCode)<%TYPE%>DataWriterNative.UnregisterInstance(_native, json_data, handle);
        }

        public ReturnCode UnregisterInstance(<%TYPE%> data, InstanceHandle handle, Timestamp timestamp)
        {
            var str = _typeSupport.EncodeToString(data);
            var json_data = MarshalHelper.NativeUtf8FromString(str);

            return (ReturnCode)<%TYPE%>DataWriterNative.UnregisterInstanceTimestamp(_native, json_data, handle, timestamp);
        }

        public ReturnCode Write(<%TYPE%> data)
        {
            return Write(data, InstanceHandle.HandleNil);
        }

        public ReturnCode Write(<%TYPE%> data, InstanceHandle handle)
        {
            if (data == null)
            {
                return ReturnCode.BadParameter;
            }

            ReturnCode ret = ReturnCode.Error;

            var str = _typeSupport.EncodeToString(data);
 #if NET7_0_OR_GREATER
            ret = (ReturnCode)<%TYPE%>DataWriterNative.Write(_native, str, handle);
 #else
            var json_data = MarshalHelper.NativeUtf8FromString(str);

            ret = (ReturnCode)<%TYPE%>DataWriterNative.Write(_native, json_data, handle);
#endif

            return ret;
        }

        public ReturnCode Write(<%TYPE%> data, InstanceHandle handle, Timestamp timestamp)
        {
            if (data == null)
            {
                return ReturnCode.BadParameter;
            }

            ReturnCode ret = ReturnCode.Error;

            var str = _typeSupport.EncodeToString(data);
            var json_data = MarshalHelper.NativeUtf8FromString(str);

            ret = (ReturnCode)<%TYPE%>DataWriterNative.WriteWithTimestamp(_native, json_data, handle, timestamp);

            return ret;
        }

        public ReturnCode Dispose(<%TYPE%> data)
        {
            return Dispose(data, InstanceHandle.HandleNil);
        }

		public ReturnCode Dispose(<%TYPE%> data, InstanceHandle handle)
        {
            if (data == null)
            {
                return ReturnCode.BadParameter;
            }

            ReturnCode ret = ReturnCode.Error;

            var str = _typeSupport.EncodeToString(data);
            var json_data = MarshalHelper.NativeUtf8FromString(str);

            ret = (ReturnCode)<%TYPE%>DataWriterNative.Dispose(_native, json_data, handle);

            return ret;
        }

        public ReturnCode Dispose(<%TYPE%> data, InstanceHandle handle, Timestamp timestamp)
        {
            if (data == null)
            {
                return ReturnCode.BadParameter;
            }

            ReturnCode ret = ReturnCode.Error;

            var str = _typeSupport.EncodeToString(data);
            var json_data = MarshalHelper.NativeUtf8FromString(str);

            ret = (ReturnCode)<%TYPE%>DataWriterNative.DisposeTimestamp(_native, json_data, handle, timestamp);

            return ret;
        }

        public ReturnCode GetKeyValue(<%TYPE%> data, InstanceHandle handle)
        {
            if (data == null)
            {
                return ReturnCode.BadParameter;
            }

            if (handle == InstanceHandle.HandleNil)
            {
                return ReturnCode.BadParameter;
            }

            ReturnCode ret = ReturnCode.Error;

            var str = _typeSupport.EncodeToString(data);
            var ptr = MarshalHelper.NativeUtf8FromString(str);
            ret = (ReturnCode)<%TYPE%>DataWriterNative.GetKeyValue(_native, ref ptr, handle);

            if (ret == ReturnCode.Ok)
            {
                var json_data = MarshalHelper.StringFromNativeUtf8(ptr) ?? string.Empty;

                if (!string.IsNullOrWhiteSpace(json_data))
                {
                    var sample = _typeSupport.DecodeFromString(json_data);

                    data.MemberwiseCopy(sample);
                }

                MarshalHelper.ReleaseNativeStringPointer(ptr);
            }

            return ret;
        }

        public InstanceHandle LookupInstance(<%TYPE%> instance)
        {
            InstanceHandle ret = InstanceHandle.HandleNil;

            var str = _typeSupport.EncodeToString(instance);
            var json_data = MarshalHelper.NativeUtf8FromString(str);

            ret = <%TYPE%>DataWriterNative.LookupInstance(_native, json_data);

            return ret;
        }
        #endregion
     }

    public static partial class <%TYPE%>DataWriterNative
    {
#if NET7_0_OR_GREATER
        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_Narrow")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial IntPtr Narrow(IntPtr dw);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_Write_Json", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int Write(IntPtr dw, string jsonData, int handle);

        [SuppressUnmanagedCodeSecurity]
        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_WriteWithTimestamp_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int WriteWithTimestamp(IntPtr dw, [In] IntPtr jsonData, int handle, [MarshalAs(UnmanagedType.Struct), In] Timestamp timestamp);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_RegisterInstance_Json", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int RegisterInstance(IntPtr dw, IntPtr jsonData);

        [SuppressUnmanagedCodeSecurity]
        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_RegisterInstanceTimestamp_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int RegisterInstanceTimestamp(IntPtr dw, [In] IntPtr jsonData, [MarshalAs(UnmanagedType.Struct), In] Timestamp timestamp);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_UnregisterInstance_Json", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int UnregisterInstance(IntPtr dw, IntPtr jsonData, int handle);

        [SuppressUnmanagedCodeSecurity]
        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_UnregisterInstanceTimestamp_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int UnregisterInstanceTimestamp(IntPtr dw, [In] IntPtr jsonData, int handle, [MarshalAs(UnmanagedType.Struct), In] Timestamp timestamp);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_LookupInstance_Json", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int LookupInstance(IntPtr dw, IntPtr jsonData);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_Dispose_Json", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int Dispose(IntPtr dw, IntPtr jsonData, int handle);

        [SuppressUnmanagedCodeSecurity]
        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_DisposeTimestamp_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int DisposeTimestamp(IntPtr dw, [In] IntPtr jsonData, int handle, [MarshalAs(UnmanagedType.Struct), In] Timestamp timestamp);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_GetKeyValue_Json", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int GetKeyValue(IntPtr dw, ref IntPtr json_data, int handle);
#else
        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_Narrow", CallingConvention = CallingConvention.Cdecl)]
        internal static extern IntPtr Narrow(IntPtr dw);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_Write_Json", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi, BestFitMapping = false, ThrowOnUnmappableChar = true)]
        internal static extern int Write(IntPtr dw, [In] IntPtr jsonData, int handle);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_WriteWithTimestamp_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int WriteWithTimestamp(IntPtr dw, [In] IntPtr jsonData, int handle, [MarshalAs(UnmanagedType.Struct), In] Timestamp timestamp);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_RegisterInstance_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int RegisterInstance(IntPtr dw, [In] IntPtr jsonData);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_RegisterInstanceTimestamp_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int RegisterInstanceTimestamp(IntPtr dw, [In] IntPtr jsonData, [MarshalAs(UnmanagedType.Struct), In] Timestamp timestamp);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_UnregisterInstance_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int UnregisterInstance(IntPtr dw, [In] IntPtr jsonData, int handle);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_UnregisterInstanceTimestamp_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int UnregisterInstanceTimestamp(IntPtr dw, [In] IntPtr jsonData, int handle, [MarshalAs(UnmanagedType.Struct), In] Timestamp timestamp);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_LookupInstance_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int LookupInstance(IntPtr dw, [In] IntPtr jsonData);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_Dispose_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int Dispose(IntPtr dw, [In] IntPtr jsonData, int handle);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_DisposeTimestamp_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int DisposeTimestamp(IntPtr dw, [In] IntPtr jsonData, int handle, [MarshalAs(UnmanagedType.Struct), In] Timestamp timestamp);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataWriter_GetKeyValue_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int GetKeyValue(IntPtr dw, [In, Out] ref IntPtr json_data, int handle);
#endif
    }

    public class <%TYPE%>DataReader : DataReader
    {
        #region Fields
        private readonly IntPtr _native;
        private <%TYPE%>TypeSupport _typeSupport;
        #endregion

        #region Constructors
        public <%TYPE%>DataReader(DataReader dr) : base(dr.ToNative())
        {
			IntPtr ptr = base.ToNative();
            _native = <%TYPE%>DataReaderNative.Narrow(ptr);

            _typeSupport = new <%TYPE%>TypeSupport();
        }
        #endregion

        #region Methods
        public ReturnCode Read(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo)
        {
            return Read(receivedData, receivedInfo, ResourceLimitsQosPolicy.LengthUnlimited, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

        public ReturnCode Read(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, int maxSamples)
        {
            return Read(receivedData, receivedInfo, maxSamples, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

        public ReturnCode Read(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, int maxSamples, ReadCondition condition)
        {
            if (condition == null)
            {
                return ReturnCode.BadParameter;
            }

            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.ReadWithCondition(_native, ref rd, ref ri, maxSamples, condition.ToNative());

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode Read(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, int maxSamples, SampleStateMask sampleStates, ViewStateMask viewStates, InstanceStateMask instanceStates)
        {
            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.Read(_native, ref rd, ref ri, maxSamples, sampleStates, viewStates, instanceStates);

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode Take(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo)
        {
            return Take(receivedData, receivedInfo, ResourceLimitsQosPolicy.LengthUnlimited, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

        public ReturnCode Take(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, int maxSamples)
        {
            return Take(receivedData, receivedInfo, maxSamples, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

        public ReturnCode Take(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, int maxSamples, ReadCondition condition)
        {
            if (condition == null)
            {
                return ReturnCode.BadParameter;
            }

            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.TakeWithCondition(_native, ref rd, ref ri, maxSamples, condition.ToNative());

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode Take(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, int maxSamples, SampleStateMask sampleStates, ViewStateMask viewStates, InstanceStateMask instanceStates)
        {
            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.Take(_native, ref rd, ref ri, maxSamples, sampleStates, viewStates, instanceStates);

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode ReadInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle handle)
        {
            return ReadInstance(receivedData, receivedInfo, handle, ResourceLimitsQosPolicy.LengthUnlimited, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

		public ReturnCode ReadInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle handle, int maxSamples)
        {
            return ReadInstance(receivedData, receivedInfo, handle, maxSamples, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

		public ReturnCode ReadInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle handle, int maxSamples, ReadCondition condition)
        {
            if (condition == null)
            {
                return ReturnCode.BadParameter;
            }

            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.ReadInstanceWithCondition(_native, ref rd, ref ri, (int)handle, maxSamples, condition.ToNative());

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode ReadInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle handle, int maxSamples, SampleStateMask sampleStates, ViewStateMask viewStates, InstanceStateMask instanceStates)
        {
            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.ReadInstance(_native, ref rd, ref ri, handle, maxSamples, sampleStates, viewStates, instanceStates);

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode TakeInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle handle)
        {
            return TakeInstance(receivedData, receivedInfo, handle, ResourceLimitsQosPolicy.LengthUnlimited, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

		public ReturnCode TakeInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle handle, int maxSamples)
        {
            return TakeInstance(receivedData, receivedInfo, handle, maxSamples, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

		public ReturnCode TakeInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle handle, int maxSamples, ReadCondition condition)
        {
            if (condition == null)
            {
                return ReturnCode.BadParameter;
            }

            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.TakeInstanceWithCondition(_native, ref rd, ref ri, (int)handle, maxSamples, condition.ToNative());

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode TakeInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle handle, int maxSamples, SampleStateMask sampleStates, ViewStateMask viewStates, InstanceStateMask instanceStates)
        {
            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.TakeInstance(_native, ref rd, ref ri, handle, maxSamples, sampleStates, viewStates, instanceStates);

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode ReadNextInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle previousHandle)
        {
            return ReadNextInstance(receivedData, receivedInfo, previousHandle, ResourceLimitsQosPolicy.LengthUnlimited, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

		public ReturnCode ReadNextInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle previousHandle, int maxSamples)
        {
            return ReadNextInstance(receivedData, receivedInfo, previousHandle, maxSamples, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

		public ReturnCode ReadNextInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle previousHandle, int maxSamples, ReadCondition condition)
        {
            if (condition == null)
            {
                return ReturnCode.BadParameter;
            }

            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.ReadNextInstanceWithCondition(_native, ref rd, ref ri, previousHandle, maxSamples, condition.ToNative());

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode ReadNextInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle previousHandle, int maxSamples, SampleStateMask sampleStates, ViewStateMask viewStates, InstanceStateMask instanceStates)
        {
            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.ReadNextInstance(_native, ref rd, ref ri, previousHandle, maxSamples, sampleStates, viewStates, instanceStates);

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode TakeNextInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle previousHandle)
        {
            return TakeNextInstance(receivedData, receivedInfo, previousHandle, ResourceLimitsQosPolicy.LengthUnlimited, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

		public ReturnCode TakeNextInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle previousHandle, int maxSamples)
        {
            return TakeNextInstance(receivedData, receivedInfo, previousHandle, maxSamples, SampleStateMask.AnySampleState, ViewStateMask.AnyViewState, InstanceStateMask.AnyInstanceState);
        }

		public ReturnCode TakeNextInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle previousHandle, int maxSamples, ReadCondition condition)
        {
            if (condition == null)
            {
                return ReturnCode.BadParameter;
            }

            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.TakeNextInstanceWithCondition(_native, ref rd, ref ri, previousHandle, maxSamples, condition.ToNative());

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode TakeNextInstance(List<<%TYPE%>> receivedData, List<SampleInfo> receivedInfo, InstanceHandle previousHandle, int maxSamples, SampleStateMask sampleStates, ViewStateMask viewStates, InstanceStateMask instanceStates)
        {
            if (receivedData == null || receivedInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            receivedData.Clear();
            receivedInfo.Clear();

            IntPtr rd = IntPtr.Zero;
            IntPtr ri = IntPtr.Zero;

            ReturnCode ret = ReturnCode.Error;
            ret = (ReturnCode)<%TYPE%>DataReaderNative.TakeNextInstance(_native, ref rd, ref ri, previousHandle, maxSamples, sampleStates, viewStates, instanceStates);

            if (ret == ReturnCode.Ok && !rd.Equals(IntPtr.Zero) && !ri.Equals(IntPtr.Zero))
            {
                IList<string> data = new List<string>();
                IList<SampleInfoWrapper> info = new List<SampleInfoWrapper>();

                MarshalHelper.PtrToUTF8StringSequence(rd, ref data);
                MarshalHelper.PtrToSequence(ri, ref info);

                if (data != null)
                {
                    foreach (var d in data)
                    {
                        receivedData.Add(_typeSupport.DecodeFromString(d));
                    }
                }

                if (info != null && info.Count > 0)
                {
                    foreach (var i in info)
                    {
                        SampleInfo aux = new SampleInfo();
                        aux.FromNative(i);
                        receivedInfo.Add(aux);
                    }
                }

                MarshalHelper.ReleaseNativeStringSequence(rd);
                MarshalHelper.ReleaseNativePointer(ri);
            }

            return ret;
        }

        public ReturnCode ReadNextSample(<%TYPE%> data, SampleInfo sampleInfo)
        {
            if (data == null || sampleInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            ReturnCode ret = ReturnCode.Error;
            IntPtr ptr = IntPtr.Zero;
            SampleInfoWrapper infoWrapper = new SampleInfoWrapper();

            ret = (ReturnCode)<%TYPE%>DataReaderNative.ReadNextSample(_native, ref ptr, ref infoWrapper);

            if (ret == ReturnCode.Ok)
            {
                var json_data = MarshalHelper.StringFromNativeUtf8(ptr) ?? string.Empty;

                if (!string.IsNullOrWhiteSpace(json_data))
                {
                    var sample = _typeSupport.DecodeFromString(json_data);

                    data.MemberwiseCopy(sample);
                }

                MarshalHelper.ReleaseNativeStringPointer(ptr);

                sampleInfo.FromNative(infoWrapper);
            }

            return ret;
        }

        public ReturnCode TakeNextSample(<%TYPE%> data, SampleInfo sampleInfo)
        {
            if (data == null || sampleInfo == null)
            {
                return ReturnCode.BadParameter;
            }

            ReturnCode ret = ReturnCode.Error;
            var ptr = IntPtr.Zero;
            var infoWrapper = new SampleInfoWrapper();
            ret = (ReturnCode)<%TYPE%>DataReaderNative.TakeNextSample(_native, ref ptr, ref infoWrapper);
            if (ret == ReturnCode.Ok)
            {
                var json_data = MarshalHelper.StringFromNativeUtf8(ptr) ?? string.Empty;

                if (!string.IsNullOrWhiteSpace(json_data))
                {
                    var sample = _typeSupport.DecodeFromString(json_data);

                    data.MemberwiseCopy(sample);
                }

                MarshalHelper.ReleaseNativeStringPointer(ptr);

                sampleInfo.FromNative(infoWrapper);
            }

            return ret;
        }

        public ReturnCode GetKeyValue(<%TYPE%> data, InstanceHandle handle)
        {
            if (data == null)
            {
                return ReturnCode.BadParameter;
            }

            if (handle == InstanceHandle.HandleNil)
            {
                return ReturnCode.BadParameter;
            }

            var str = _typeSupport.EncodeToString(data);
            var ptr = MarshalHelper.NativeUtf8FromString(str);

            var ret = (ReturnCode)<%TYPE%>DataReaderNative.GetKeyValue(_native, ref ptr, handle);

            if (ret == ReturnCode.Ok)
            {
                var json_data = MarshalHelper.StringFromNativeUtf8(ptr) ?? string.Empty;

                if (!string.IsNullOrWhiteSpace(json_data))
                {
                    var sample = _typeSupport.DecodeFromString(json_data);

                    data.MemberwiseCopy(sample);
                }

                MarshalHelper.ReleaseNativeStringPointer(ptr);
            }

            return ret;
        }

        public InstanceHandle LookupInstance(<%TYPE%> instance)
        {
            InstanceHandle ret = InstanceHandle.HandleNil;

            var json_data = _typeSupport.EncodeToString(instance);

            ret = <%TYPE%>DataReaderNative.LookupInstance(_native, json_data);

            return ret;
        }
        #endregion
    }

    internal static partial class <%TYPE%>DataReaderNative
    {
#if NET7_0_OR_GREATER
        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_Narrow")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial IntPtr Narrow(IntPtr dr);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_Read_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int Read(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadWithCondition_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int ReadWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_Take_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int Take(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeWithCondition_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int TakeWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadInstance_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int ReadInstance(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadInstanceWithCondition_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int ReadInstanceWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeInstance_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int TakeInstance(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeInstanceWithCondition_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int TakeInstanceWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadNextInstance_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int ReadNextInstance(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadNextInstanceWithCondition_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int ReadNextInstanceWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeNextInstance_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int TakeNextInstance(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeNextInstanceWithCondition_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int TakeNextInstanceWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadNextSample_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int ReadNextSample(IntPtr dr, [In, Out] ref IntPtr json_data, [In, Out] ref SampleInfoWrapper sampleInfo);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeNextSample_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int TakeNextSample(IntPtr dr, [In, Out] ref IntPtr json_data, [In, Out] ref SampleInfoWrapper sampleInfo);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_LookupInstance_Json", StringMarshalling = StringMarshalling.Utf8)]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int LookupInstance(IntPtr dr, string jsonData);

        [SuppressUnmanagedCodeSecurity]
        [LibraryImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_GetKeyValue_Json")]
        [UnmanagedCallConv(CallConvs = new[] { typeof(System.Runtime.CompilerServices.CallConvCdecl) })]
        internal static partial int GetKeyValue(IntPtr dr, ref IntPtr data, int handle);
#else
        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_Narrow", CallingConvention = CallingConvention.Cdecl)]
        internal static extern IntPtr Narrow(IntPtr dr);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_Read_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int Read(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadWithCondition_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int ReadWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_Take_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int Take(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeWithCondition_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int TakeWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadInstance_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int ReadInstance(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadInstanceWithCondition_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int ReadInstanceWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeInstance_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int TakeInstance(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeInstanceWithCondition_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int TakeInstanceWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadNextInstance_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int ReadNextInstance(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadNextInstanceWithCondition_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int ReadNextInstanceWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeNextInstance_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int TakeNextInstance(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, uint sampleStates, uint viewStates, uint instanceStates);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeNextInstanceWithCondition_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int TakeNextInstanceWithCondition(IntPtr dr, ref IntPtr receivedData, ref IntPtr receivedInfo, int handle, int maxSamples, IntPtr condition);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_ReadNextSample_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int ReadNextSample(IntPtr dr, [In, Out] ref IntPtr json_data, [In, Out] ref SampleInfoWrapper sampleInfo);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_TakeNextSample_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int TakeNextSample(IntPtr dr, [In, Out] ref IntPtr json_data, [In, Out] ref SampleInfoWrapper sampleInfo);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_LookupInstance_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int LookupInstance(IntPtr dr, [MarshalAs(UnmanagedType.LPStr), In]string jsonData);

        [SuppressUnmanagedCodeSecurity]
        [DllImport(<%TYPE%>.API_DLL, EntryPoint = "<%SCOPED_METHOD%>DataReader_GetKeyValue_Json", CallingConvention = CallingConvention.Cdecl)]
        internal static extern int GetKeyValue(IntPtr dr, [In, Out] ref IntPtr data, int handle);
#endif
    }